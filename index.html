<html><head>
    <link href="index.css" rel="stylesheet">
  
  </head><body>
    <div id="mocha"><ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="javascript:void(0);">passes:</a> <em>10</em></li><li class="failures"><a href="javascript:void(0);">failures:</a> <em>2</em></li><li class="duration">duration: <em>331.56</em>s</li></ul><ul id="mocha-report"><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-sinon.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-sinon%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-knockout.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-knockout%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-express.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-express%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-messy.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-messy%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-http.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-http%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test fail"><h2>https://github.com/unexpectedjs/unexpected-mitm.git <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-mitm%5C.git" class="replay">‣</a></h2><pre class="error">Error: Test Failure

&gt; unexpected-mitm@12.2.3 test /home/travis/build/alexjeffburke/unexpected-build-canary/builds/https-github-com-unexpectedjs-unexpected-mitm-git
&gt; mocha --compilers md:unexpected-markdown test/*.js `find documentation -name '*.md'` &amp;&amp; npm run lint



  unexpectedMitm
    ✓ should mock out a simple request (64ms)
    ✓ should mock out a request with a binary body
    ✓ should clean up properly after a keep-alived request with a custom Agent instance
    ✓ should clean up properly after a keep-alived request with the global agent
    ✓ should mock out an erroring response
    ✓ should mock out an erroring response 2
    ✓ should mock out an application/json response
    ✓ should mock out an application/json response with invalid JSON
    ✓ should preserve the original serialization of JSON provided as a string
    ✓ should not break when the assertion being delegated to throws synchronously
    ✓ should support mocking out the status code
    ✓ should work fine without any assertions on the request
    ✓ should error if the request body provided for verification was a stream
    ✓ should produce a JSON response if the response body is given as an object
    ✓ should produce a JSON response if the response body is given as an array
    ✓ should produce an error if the request conditions are not satisfied (58ms)
    ✓ should produce an error if a mocked request is not exercised
    ✓ should produce an error if a mocked request is not exercised and the second mock has a stream
    ✓ should decode the textual body if a mocked request is not exercised (43ms)
    ✓ should produce an error if a mocked request is not exercised with an expected request stream
    ✓ should produce an error if a mocked request is not exercised and there are non-trivial assertions on it (70ms)
    ✓ should produce an error if a mocked request is not exercised and there are failing async expects (65ms)
    ✓ should not mangle the requestDescriptions array
    ✓ should output the error if the assertion being delegated to fails
    ✓ should not overwrite an explicitly defined Host header in the expected request properties
    ✓ should interpret a response body provided as a non-Buffer object as JSON even though the message has a non-JSON Content-Type
    ✓ should preserve the fulfilment value of the promise returned by the assertion being delegated to
    ✓ should fail early, even when there are unexercised mocks (47ms)
    ✓ should fail a test as soon as an unexpected request is made, even if the code being tested ignores the request failing
    ✓ should fail a test as soon as an unexpected request is made, even if the code being tested ignores the request failing and fails with another error (45ms)
    ✓ should fail a test as soon as an unexpected request is made, even if the code being tested ignores the request failing and fails with an uncaught exception (38ms)
    ✓ should handle concurrent requests without confusing the Host headers
    ✓ should be unaffected by modifications to the mocks array after initiating the assertion
    ✓ should not break when a response mocked out by an Error instance with extra properties is checked against the actual exchanges at the end
    with async expects on the request
      ✓ should succeed
      ✓ should fail with a diff (58ms)
    when mocking out an https request and asserting that the request is https
      when https is specified as part of the request url
        ✓ should succeed
        ✓ should fail
      when "encrypted" is specified as a standalone property
        ✓ should succeed
        ✓ should fail
    using a fully-qualified request url
      ✓ should assert on the host name of the issued request
      ✓ should fail (57ms)
    with multiple mocks specified
      ✓ should succeed with 'to call the callback without error'
      ✓ should succeed with 'not to error'
    with a response body provided as a stream
      ✓ should support providing such a response
      ✓ should decode the stream as a string
      ✓ should decode the stream as JSON
      ✓ should treat Content-Length case insentitively
      ✓ should treat Transfer-Encoding case insentitively
      that emits an error
        ✓ should propagate the error to the mocked-out HTTP response
        ✓ should support a stream that emits some data, then errors out
        ✓ should recover from the error and replay the next request
    with the expected request body given as an object (shorthand for JSON)
      ✓ should succeed the match
      ✓ should fail with a diff (41ms)
    when the test suite issues more requests than have been mocked out
      ✓ should produce an error
      ✓ should produce an error and decode the textual body
      ✓ should produce an error as soon as the first request is issued, even when the test issues more requests later
    with response function
      ✓ should allow returning a response in callback
      ✓ should allow returning a response with a body Buffer
      ✓ should allow returning a response with a body Array
      ✓ should allow returning a response with a body Object
      ✓ should allow consuming the request body (84ms)
      ✓ should allow the use of pipe() internally
      ✓ should report if the response function returns an error
      with documentation response function
        ✓ should remark "to be expected" for GET /thatOneExpectedThing
        ✓ should remark "how very unexpected" for GET /somethingOtherThing
    wíth a client certificate
      when asserting on ca/cert/key
        ✓ should succeed
        ✓ should fail with a meaningful error message
    in recording mode against a local HTTP server
      ✓ should record
      ✓ should preserve the fulfilment value
      ✓ should not break on an exception from the request itself
      ✓ should record an error
      ✓ should record a socket disconnect
      ✓ should recognize a Content-Type ending with +json as JSON, but preserve it in the recording
      ✓ should output the error if the assertion being delegated to fails (43ms)
      ✓ should not break when the assertion being delegated to throws synchronously
    in injecting mode against a local HTTP server
      ✓ should record and inject (533ms)
      ✓ should record and inject textual injections (529ms)
      ✓ should record and inject into a compound assertion (543ms)
      ✓ should correctly handle buffer injections (536ms)
      ✓ should correctly handle long buffer injections (&gt;32 octets should be base64 encoded) (531ms)
      ✓ should correctly handle error injections (526ms)
      ✓ should correctly handle multiple injections (542ms)
    in recording mode against a local HTTPS server
      with a client certificate
        ✓ should record a client certificate
    in capturing mode
      ✓ should resolve with delegated fulfilment
      ✓ should capture the correct mocks
      ✓ should output the error if the assertion being delegated to fails (39ms)
      ✓ should not break when the assertion being delegated to throws synchronously
    in replaying mode
      ✓ should resolve with delegated fulfilment
      ✓ should replay the correct mocks
      ✓ should replay with delegated fulfilment
    with the "with extra info" flag
      ✓ should resolve with the compared exchanges
      ✓ should output response headers preserving their original case
    when verifying
      ✓ should verify and resolve with delegated fulfilment
      ✓ should verify and resolve with extra info
      ✓ should verify an ISO-8859-1 request
      ✓ should verify an object
      ✓ should allow excluding headers from verification
      ✓ should allow verify options on multiple mocks
      ✓ should fail with a diff (58ms)
      with a POST in the presence of a request body
        ✓ should verify when it is an array
        ✓ should verify when it is an object
        ✓ should verify when it is a string
      with a mock in a file
        ✓ should verify and resolve with delegated fulfilment
      using UNEXPECTED_MITM_VERIFY=true on the command line
        ✓ should be verified (48ms)
        ✓ should verify a mock in a file

  with-http-mocked-out
    ✓ example #1 (documentation/assertions/any/with-http-mocked-out.md:8:1) should succeed (101ms)
    ✓ example #2 (documentation/assertions/any/with-http-mocked-out.md:27:1) should succeed
    ✓ example #3 (documentation/assertions/any/with-http-mocked-out.md:60:1) should succeed
    ✓ example #4 (documentation/assertions/any/with-http-mocked-out.md:107:1) should succeed
    ✓ example #5 (documentation/assertions/any/with-http-mocked-out.md:158:1) should succeed

  with-http-recorded
    ✓ example #1 (documentation/assertions/any/with-http-recorded.md:7:1) should succeed

  with-http-mocked-out-by-file
    ✓ example #1 (documentation/assertions/any/with-http-mocked-out-by-file.md:8:1) should succeed

  myApp
    ✓ should report that it does not currently rain

  myApp
    ✓ should report that it does not currently rain

  with documentation response function
    ✓ should remark "to be expected" for GET /thatOneExpectedThing
    ✓ should remark "how very unexpected" for GET /somethingOtherThing

  myApp
    ✓ should report that it does not currently rain

  with documentation response function
    ✓ should remark "to be expected" for GET /thatOneExpectedThing
    ✓ should remark "how very unexpected" for GET /somethingOtherThing

  with something of a real service
    ✓ should verify the mock again the real service

  requests to a popular web search service
    ✓ should have a Content-Type (96ms)


  122 passing (6s)


&gt; unexpected-mitm@12.2.3 lint /home/travis/build/alexjeffburke/unexpected-build-canary/builds/https-github-com-unexpectedjs-unexpected-mitm-git
&gt; eslint .


/home/travis/build/alexjeffburke/unexpected-build-canary/builds/https-github-com-unexpectedjs-unexpected-mitm-git/lib/unexpectedMitm.js
  1:11  error  'setImmediate' is defined but never used  no-unused-vars

✖ 1 problem (1 error, 0 warnings)


    at createError (/home/travis/build/alexjeffburke/unexpected-build-canary/node_modules/fugl/src/run-in-folder.js:13:10)
    at ChildProcess.npm.on.code (/home/travis/build/alexjeffburke/unexpected-build-canary/node_modules/fugl/src/run-in-folder.js:61:23)
    at ChildProcess.emit (events.js:189:13)
    at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)</pre><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-dom.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-dom%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-resemble.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-resemble%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-exif.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-exif%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-stream.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-stream%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test pass fast"><h2>https://github.com/unexpectedjs/unexpected-color.git<span class="duration">0ms</span> <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-color%5C.git" class="replay">‣</a></h2><pre style="display: none;"><code></code></pre></li><li class="test fail"><h2>https://github.com/unexpectedjs/unexpected-markdown.git <a href="blank?grep=https%3A%2F%2Fgithub%5C.com%2Funexpectedjs%2Funexpected-markdown%5C.git" class="replay">‣</a></h2><pre class="error">Error: Test Failure

&gt; unexpected-markdown@2.1.0 test /home/travis/build/alexjeffburke/unexpected-build-canary/builds/https-github-com-unexpectedjs-unexpected-markdown-git
&gt; mocha &amp;&amp; npm run lint



  UnexpectedMarkdown
    toHtml
      ✓ syntax highlight examples
      ✓ outputs evaluated examples
    withUpdatedExamples
      ✓ produces a markdown where the examples has been updated

  convertMarkdownToMocha
    ✓ should convert a returning snippet expected to be successful
    ✓ should convert a returning snippet expected to fail
    ✓ should convert a returning snippet expected to fail followed by another one
    ✓ should convert non-returning snippet expected to be successful
    ✓ should convert a non-returning snippet expected to fail
    ✓ should convert a non-returning snippet expected to fail followed by another one
    ✓ should convert a synchronously succeeding snippet followed by another one
    ✓ should inject a fresh unexpected clone before a snippet with #freshExpect:true

  extractSnippets
    ✓ should extract a snippet between some markdown sections
    ✓ should multiple snippets
    ✓ should normalize js to javascript
    ✓ should default to evaluate:true
    ✓ should allow changing evaluate to false via js#evaluate:false
    ✓ should allow changing evaluate to false via a preceding HTML comment
    ✓ should extract a flag after the language specifier and #
    ✓ should extract multiple comma-separated flags after the language specifier and #
    ✓ should extract a flag from a preceding HTML comment
    ✓ should extract multiple comma-separated flags from a preceding HTML comment
    ✓ should extract flags from multiple preceding HTML comments
    ✓ should not extract flags from preceding HTML comments that do not start with the unexpected-markdown marker
    ✓ should tolerate whitespace between the flags and commans in the preceding HTML comment
    ✓ should extract flags from both a preceding HTML command and after the language specifier and #
    ✓ should let the flags after the language specifier win when the same flag is provided in both places
    ✓ provides the index of the block
    ✓ skips past a preceding HTML comment when providing the index


  28 passing (234ms)


&gt; unexpected-markdown@2.1.0 lint /home/travis/build/alexjeffburke/unexpected-build-canary/builds/https-github-com-unexpectedjs-unexpected-markdown-git
&gt; eslint .


/home/travis/build/alexjeffburke/unexpected-build-canary/builds/https-github-com-unexpectedjs-unexpected-markdown-git/lib/UnexpectedMarkdown.js
  1:10  error  'JSON' is defined but never used  no-unused-vars

✖ 1 problem (1 error, 0 warnings)


    at createError (/home/travis/build/alexjeffburke/unexpected-build-canary/node_modules/fugl/src/run-in-folder.js:13:10)
    at ChildProcess.npm.on.code (/home/travis/build/alexjeffburke/unexpected-build-canary/node_modules/fugl/src/run-in-folder.js:61:23)
    at ChildProcess.emit (events.js:189:13)
    at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)</pre><pre style="display: none;"><code></code></pre></li></ul></div>
  

</body></html>